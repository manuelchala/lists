<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Select Line</title>
</head>
<body>
  <label for="line">Select line:</label>
  <select id="line">
    <option value="">-- Select --</option>
    <option value="179">Line 179</option>
    <option value="567">Line 567</option>
  </select>

  <p id="status"></p>

  <script>
    const dropdown = document.getElementById("line");
    const status = document.getElementById("status");

    dropdown.addEventListener("change", async () => {
      const choice = dropdown.value;
      if (!choice) return;
      status.textContent = "Sending...";

      // Trigger GitHub Action via workflow_dispatch
      // You need to create a PAT in your GitHub settings with "repo" permissions
      // This token is stored in a GitHub Action secret, so we will not put it here

      const repo = "YOUR_USERNAME/YOUR_REPO";
      const workflow = "update-selection.yml"; // will create this next

      await fetch(`https://api.github.com/repos/${repo}/actions/workflows/${workflow}/dispatches`, {
        method: "POST",
        headers: {
          "Accept": "application/vnd.github.v3+json",
          "Authorization": "token YOUR_PERSONAL_ACCESS_TOKEN"
        },
        body: JSON.stringify({
          ref: "main",  // branch
          inputs: { line_id: choice }
        })
      }).then(res => {
        if (res.ok) {
          status.textContent = `Saved line: ${choice}`;
        } else {
          status.textContent = `Error: ${res.status}`;
        }
      }).catch(err => {
        status.textContent = "Error sending request!";
        console.error(err);
      });
    });
  </script>
</body>
</html>


